---
pre-commit:
  parallel: true
  files: git diff --name-only --cached
  jobs:
    - name: gofmt
      root: "backend"
      glob: "*.go"
      run: go fmt ./...
    - name: govet
      glob: "*.go"
      root: "backend"
      run: go vet ./...
    - name: goimports
      glob: "*.go"
      root: "backend"
      run: goimports -l {files}
    - name: golangci-lint
      glob: "*.go"
      root: "backend"
      run: golangci-lint run $(for file in {files}; do dirname "$file"; done | sort -u)

    - name: yamllint
      glob: "*.yaml"
      run: yamllint {files}
    - name: tomllint
      glob: "*.toml"
      run: taplo lint {files}
